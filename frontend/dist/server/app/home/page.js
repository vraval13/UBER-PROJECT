(()=>{var e={};e.id=620,e.ids=[620],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},2412:e=>{"use strict";e.exports=require("assert")},9428:e=>{"use strict";e.exports=require("buffer")},9646:e=>{"use strict";e.exports=require("child_process")},5511:e=>{"use strict";e.exports=require("crypto")},4735:e=>{"use strict";e.exports=require("events")},9021:e=>{"use strict";e.exports=require("fs")},1630:e=>{"use strict";e.exports=require("http")},5591:e=>{"use strict";e.exports=require("https")},1645:e=>{"use strict";e.exports=require("net")},1820:e=>{"use strict";e.exports=require("os")},3873:e=>{"use strict";e.exports=require("path")},7910:e=>{"use strict";e.exports=require("stream")},4631:e=>{"use strict";e.exports=require("tls")},3997:e=>{"use strict";e.exports=require("tty")},9551:e=>{"use strict";e.exports=require("url")},8354:e=>{"use strict";e.exports=require("util")},4075:e=>{"use strict";e.exports=require("zlib")},2655:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var r=s(260),i=s(8203),a=s(5155),n=s.n(a),l=s(7292),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["home",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6339)),"C:\\UBER-CLONE-PROJECT\\frontend\\src\\app\\home\\page.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,2804)),"C:\\UBER-CLONE-PROJECT\\frontend\\src\\app\\layout.js"],loading:[()=>Promise.resolve().then(s.bind(s,8988)),"C:\\UBER-CLONE-PROJECT\\frontend\\src\\app\\loading.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,1485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\UBER-CLONE-PROJECT\\frontend\\src\\app\\home\\page.js"],u={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/home/page",pathname:"/home",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8110:(e,t,s)=>{Promise.resolve().then(s.bind(s,6339))},9862:(e,t,s)=>{Promise.resolve().then(s.bind(s,1499))},2929:(e,t,s)=>{"use strict";s.d(t,{L:()=>d});var r=s(8009),i=s(2138);let a="undefined"!=typeof window?r.useLayoutEffect:r.useEffect,n=e=>e&&!Array.isArray(e)&&"object"==typeof e,l=[],o={},c=i.Ay,d=(e,t=l)=>{let s=o;n(e)?(s=e,e=null,t="dependencies"in s?s.dependencies:l):n(t)&&(t="dependencies"in(s=t)?s.dependencies:l),e&&"function"!=typeof e&&console.warn("First parameter must be a function or config object");let{scope:i,revertOnUpdate:d}=s,u=(0,r.useRef)(!1),p=(0,r.useRef)(c.context(()=>{},i)),m=(0,r.useRef)(e=>p.current.add(null,e)),x=t&&t.length&&!d;return a(()=>{if(e&&p.current.add(e,i),!x||!u.current)return()=>p.current.revert()},t),x&&a(()=>(u.current=!0,()=>p.current.revert()),l),{context:p.current,contextSafe:m.current}};d.register=e=>{c=e},d.headless=!0},1518:(e,t,s)=>{"use strict";var r=s(3897);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,s,i,a,n){if(n!==r){var l=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return s.PropTypes=s,s}},8200:(e,t,s)=>{e.exports=s(1518)()},3897:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},1499:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var r=s(5512),i=s(1439),a=s(8009),n=s(8200),l=s.n(n);let o=({suggestions:e=[],setVehiclePanel:t,setPanelOpen:s,setPickup:i,setDestination:a,activeField:n})=>{let l=e=>{"pickup"===n?i(e):"destination"===n&&a(e)};return(0,r.jsx)("div",{children:e?.length>0?e.map((e,t)=>(0,r.jsxs)("div",{onClick:()=>l(e),className:"flex gap-4 border-2 p-3 border-gray-50 active:border-black rounded-xl items-center my-2 justify-start cursor-pointer hover:bg-gray-100",children:[(0,r.jsx)("h2",{className:"bg-[#eee] h-8 flex items-center justify-center w-12 rounded-full",children:(0,r.jsx)("i",{className:"ri-map-pin-fill"})}),(0,r.jsx)("h4",{className:"font-medium",children:e})]},t)):(0,r.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No suggestions available"})})};o.propTypes={suggestions:l().array,setVehiclePanel:l().func.isRequired,setPanelOpen:l().func.isRequired,setPickup:l().func.isRequired,setDestination:l().func.isRequired,activeField:l().string.isRequired};var c=s(5103),d=s(2929),u=s(2138);s(5303);let p=({createRide:e,setVehiclePanel:t,setConfirmRidePanel:s,selectVehicle:i,fare:a})=>{let n=[{name:"UberGo",seats:4,time:"2 mins away",description:"Affordable, compact rides",price:a.car,image:"/car.webp",type:"car"},{name:"Moto",seats:1,time:"3 mins away",description:"Affordable motorcycle rides",price:a.moto,image:"/bike.webp",type:"moto"},{name:"UberAuto",seats:3,time:"3 mins away",description:"Affordable Auto rides",price:a.auto,image:"/auto.webp",type:"auto"}];return(0,r.jsxs)("div",{className:"relative bg-white rounded-t-3xl shadow-lg",children:[(0,r.jsx)("h5",{className:"absolute -top-10 left-1/2 transform -translate-x-1/2 text-gray-200 cursor-pointer",onClick:()=>t(!1),children:(0,r.jsx)("i",{className:"text-3xl ri-arrow-down-wide-line"})}),(0,r.jsx)("h3",{className:"text-2xl font-semibold mb-5 text-center",children:"Choose a Vehicle"}),n.map((e,t)=>(0,r.jsxs)("div",{className:"flex border-2 hover:border-black mb-2 rounded-xl w-full p-3 items-center justify-between cursor-pointer transition-all",onClick:()=>{s(!0),i(e.type)},children:[(0,r.jsx)(c.default,{className:"h-12",src:e.image,alt:e.name,width:64,height:64}),(0,r.jsxs)("div",{className:"ml-2 w-1/2",children:[(0,r.jsxs)("h4",{className:"text-base font-medium",children:[e.name," ",(0,r.jsxs)("span",{className:"text-gray-500",children:[(0,r.jsx)("i",{className:"ri-user-3-fill"})," ",e.seats]})]}),(0,r.jsx)("h5",{className:"text-sm font-medium",children:e.time}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:e.description})]}),(0,r.jsxs)("h2",{className:"text-lg font-semibold",children:["₹",e.price]})]},t))]})},m=e=>(0,r.jsxs)("div",{children:[(0,r.jsx)("h5",{className:"p-1 text-center w-[93%] absolute top-0 ",onClick:()=>{e.setConfirmRidePanel(!1)},children:(0,r.jsx)("i",{className:" text-3xl text-gray-200 ri-arrow-down-wide-line"})}),(0,r.jsx)("h3",{className:"text-2xl font-semibold mb-5",children:"Confirm your Ride"}),(0,r.jsxs)("div",{className:"flex gap-2 justify-between  flex-col items-center",children:[(0,r.jsx)(c.default,{src:{car:"/car.webp",moto:"/bike.webp",auto:"/auto.webp"}[e.vehicleType],alt:"",width:150,height:150}),(0,r.jsxs)("div",{className:"w-full mt-5",children:[(0,r.jsxs)("div",{className:"flex items-center gap-5 p-3 border-b-2",children:[(0,r.jsx)("i",{className:" text-lg ri-map-pin-user-fill"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium ",children:e.pickup}),(0,r.jsx)("p",{className:"text-sm -mt-1 text-gray-600",children:"Pickup Location"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-5 p-3 border-b-2",children:[(0,r.jsx)("i",{className:" text-lg ri-map-pin-2-fill"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium ",children:e.destination}),(0,r.jsx)("p",{className:"text-sm -mt-1 text-gray-600",children:"Dropoff Location"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-5 p-3 ",children:[(0,r.jsx)("i",{className:"ri-currency-line"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-medium ",children:["₹",e.fare[e.vehicleType]]}),(0,r.jsx)("p",{className:"text-sm -mt-1 text-gray-600",children:"Cash Cash"})]})]})]}),(0,r.jsx)("button",{onClick:()=>{e.setVehicleFound(!0),e.setConfirmRidePanel(!1),e.createRide()},className:" mt-5 w-full bg-green-600 text-white font-semibold p-2 rounded-lg",children:"Confirm"})]})]}),x=e=>(0,r.jsxs)("div",{children:[(0,r.jsx)("h5",{className:"p-1 text-center w-[93%] absolute top-0",onClick:()=>{e.setVehicleFound(!1)},children:(0,r.jsx)("i",{className:"text-3xl text-gray-200 ri-arrow-down-wide-line"})}),(0,r.jsx)("h3",{className:"text-2xl font-semibold mb-5",children:"Looking for a Driver"}),(0,r.jsxs)("div",{className:"flex gap-2 justify-between flex-col items-center",children:[(0,r.jsx)(c.default,{src:{car:"/car.webp",moto:"/bike.webp",auto:"/auto.webp"}[e.vehicleType]||"/car.webp",alt:"",width:150,height:150}),(0,r.jsxs)("div",{className:"w-full mt-5",children:[(0,r.jsxs)("div",{className:"flex items-center gap-5 p-3 border-b-2",children:[(0,r.jsx)("i",{className:"text-lg ri-map-pin-user-fill"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium",children:e.pickup}),(0,r.jsx)("p",{className:"text-sm -mt-1 text-gray-600",children:"Pickup Location"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-5 p-3 border-b-2",children:[(0,r.jsx)("i",{className:"text-lg ri-map-pin-2-fill"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium",children:e.destination}),(0,r.jsx)("p",{className:"text-sm -mt-1 text-gray-600",children:"Dropoff Location"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-5 p-3",children:[(0,r.jsx)("i",{className:"ri-currency-line"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-medium",children:["₹",e.fare[e.vehicleType]||"0.00"]}),(0,r.jsx)("p",{className:"text-sm -mt-1 text-gray-600",children:"Cash"})]})]})]})]})]}),h=({setWaitingForDriver:e,ride:t})=>(0,r.jsxs)("div",{children:[(0,r.jsx)("h5",{className:"p-1 text-center w-[93%] absolute top-0",onClick:()=>{e(!1)},children:(0,r.jsx)("i",{className:"text-3xl text-gray-200 ri-arrow-down-wide-line"})}),t?(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(c.default,{src:"/car.webp",width:120,height:120,alt:"Car"}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("h2",{className:"text-lg font-medium capitalize",children:t.captain?.fullname?.firstname+" "+t?.captain?.fullname?.lastname||"Driver Name"}),(0,r.jsx)("h4",{className:"text-xl font-semibold -mt-1 -mb-1",children:t.captain?.vehicle?.plate||"Plate Number"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"White Honda Mobilio - V"}),(0,r.jsxs)("h1",{className:"text-lg font-semibold",children:["OTP: ",t?.otp]})]})]}),(0,r.jsx)("div",{className:"flex gap-2 justify-between flex-col items-center",children:(0,r.jsxs)("div",{className:"w-full mt-5",children:[(0,r.jsxs)("div",{className:"flex items-center gap-5 p-3 border-b-2",children:[(0,r.jsx)("i",{className:"text-lg ri-map-pin-user-fill"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium",children:t.pickup}),(0,r.jsx)("p",{className:"text-sm -mt-1 text-gray-600",children:"Pickup Location"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-5 p-3 border-b-2",children:[(0,r.jsx)("i",{className:"text-lg ri-map-pin-2-fill"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-medium",children:t.destination}),(0,r.jsx)("p",{className:"text-sm -mt-1 text-gray-600",children:"Dropoff Location"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-5 p-3",children:[(0,r.jsx)("i",{className:"ri-currency-line"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"text-lg font-medium",children:["₹",t.fare||0]}),(0,r.jsx)("p",{className:"text-sm -mt-1 text-gray-600",children:"Cash Cash"})]})]})]})})]}):(0,r.jsx)("p",{className:"text-center text-gray-500",children:"Loading ride details..."})]});var f=s(1661),g=s(1767),j=s(8531),b=s.n(j),y=s(9334),v=s(1930);let N=()=>{let e=(0,y.useRouter)(),[t,s]=(0,a.useState)(""),[n,l]=(0,a.useState)(""),[j,N]=(0,a.useState)([]),[w,k]=(0,a.useState)([]),[C,P]=(0,a.useState)(!1),[R,E]=(0,a.useState)(!1),[q,T]=(0,a.useState)(!1),[S,A]=(0,a.useState)(!1),[_,O]=(0,a.useState)(!1),[L,I]=(0,a.useState)({}),[z,$]=(0,a.useState)(null),[U,D]=(0,a.useState)(null),[F,V]=(0,a.useState)(null),B=(0,a.useRef)(null),Y=(0,a.useRef)(null),G=(0,a.useRef)(null),J=(0,a.useRef)(null),M=(0,a.useRef)(null),W=(0,a.useRef)(null),{socket:H}=(0,a.useContext)(f.d),{user:K}=(0,a.useContext)(g.l);(0,a.useEffect)(()=>(K&&K._id&&H.emit("join",{userId:K._id,userType:"user"}),H.on("ride-confirmed",e=>{A(!1),O(!0),V(e)}),H.on("ride-started",t=>{O(!1),V(t),e.replace(`/Riding?rideId=${t._id}&pickup=${t.pickup}&destination=${t.destination}&fare=${t.fare}&captainName=${t.captain.fullname.firstname}`)}),()=>{H.off("ride-confirmed"),H.off("ride-started")}),[H,K,e]);let X=async e=>{let t=e.target.value;s(t),localStorage.setItem("pickup",t);try{let t=await fetch(`https://uber-backend-zq0d.onrender.com/maps/get-suggestions?input=${e.target.value}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),s=await t.json();N(s)}catch(e){console.error("Error fetching pickup suggestions:",e)}},Q=async e=>{let t=e.target.value;l(t),localStorage.setItem("destination",t);try{let t=await fetch(`https://uber-backend-zq0d.onrender.com/maps/get-suggestions?input=${e.target.value}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),s=await t.json();k(s)}catch(e){console.error("Error fetching destination suggestions:",e)}};async function Z(){try{E(!0),P(!1);let e=localStorage.getItem("pickup")||"",t=localStorage.getItem("destination")||"";console.log("pickup:",e),console.log("destination:",t);let s=await fetch(`https://uber-backend-zq0d.onrender.com/rides/get-fare?pickup=${encodeURIComponent(e)}&destination=${encodeURIComponent(t)}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(!s.ok)throw Error(`API call failed: ${s.statusText}`);let r=await s.json();I(r)}catch(e){console.error("Error fetching fare:",e.message)}}async function ee(){try{let e=await fetch("https://uber-backend-zq0d.onrender.com/rides/create",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({pickup:localStorage.getItem("pickup"),destination:localStorage.getItem("destination"),vehicleType:U})});if(!e.ok)throw Error(`API call failed: ${e.statusText}`);let t=await e.json();console.log("Ride created successfully:",t)}catch(e){console.error("Error creating ride:",e.message)}}return(0,d.L)(()=>{u.Ay.to(B.current,{height:C?"70%":"0%",padding:C?24:0,duration:.5}),u.Ay.to(J.current,{opacity:C?1:0,duration:.3})},[C]),(0,d.L)(()=>{u.Ay.to(Y.current,{transform:R?"translateY(0)":"translateY(100%)",duration:.5})},[R]),(0,d.L)(()=>{u.Ay.to(G.current,{transform:q?"translateY(0)":"translateY(100%)",duration:.5})},[q]),(0,d.L)(()=>{u.Ay.to(M.current,{transform:S?"translateY(0)":"translateY(100%)",duration:.5})},[S]),(0,d.L)(()=>{u.Ay.to(W.current,{transform:_?"translateY(0)":"translateY(100%)",duration:.5})},[_]),(0,r.jsx)(i.default,{children:(0,r.jsxs)("div",{className:"h-screen relative overflow-hidden",children:[(0,r.jsxs)("div",{className:"fixed p-4 top-0 flex items-center justify-between w-screen",children:[(0,r.jsx)(c.default,{className:"w-16",src:"/logo.png",alt:"Uber Logo",width:64,height:64}),(0,r.jsx)(b(),{href:"/UserLogin",className:"h-10 w-10 bg-white flex items-center justify-center rounded-full",children:(0,r.jsx)("i",{className:"text-lg font-medium ri-logout-box-r-line"})})]}),(0,r.jsx)("div",{className:"h-screen w-screen",children:(0,r.jsx)(v.A,{})}),(0,r.jsxs)("div",{className:"absolute top-0 flex flex-col justify-end h-screen w-full",children:[(0,r.jsxs)("div",{className:"relative bg-white h-[30%] p-6",children:[(0,r.jsx)("h5",{ref:J,onClick:()=>P(!1),className:"absolute right-6 top-6 text-2xl cursor-pointer",children:(0,r.jsx)("i",{className:"ri-arrow-down-wide-line"})}),(0,r.jsx)("h4",{className:"text-2xl font-semibold",children:"Find a trip"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),console.log("Pickup:",t,"Destination:",n)},className:"relative py-3",children:[(0,r.jsx)("input",{onClick:()=>{P(!0),$("pickup")},value:t,onChange:X,className:"bg-[#eee] px-12 py-2 text-lg rounded-lg w-full",type:"text",placeholder:"Add a pick-up location"}),(0,r.jsx)("input",{onClick:()=>{P(!0),$("destination")},value:n,onChange:Q,className:"bg-[#eee] px-12 py-2 text-lg rounded-lg w-full mt-3",type:"text",placeholder:"Enter your destination"})]}),(0,r.jsx)("button",{onClick:Z,className:"bg-black text-white px-4 py-2 rounded-lg mt-3 w-full font-semibold",children:"Find trip"})]}),(0,r.jsx)("div",{ref:B,className:"bg-white h-0 overflow-hidden",children:(0,r.jsx)(o,{suggestions:"pickup"===z?j:w,setPanelOpen:P,setVehiclePanel:E,setPickup:s,setDestination:l,activeField:z})})]}),(0,r.jsx)("div",{ref:Y,className:"fixed w-full z-10 bottom-0 translate-y-full bg-white px-3 py-10 pt-12",children:(0,r.jsx)(p,{selectVehicle:D,fare:L,setConfirmRidePanel:T,setVehiclePanel:E})}),(0,r.jsx)("div",{ref:G,className:"fixed w-full z-10 bottom-0 translate-y-full bg-white px-3 py-6 pt-12",children:(0,r.jsx)(m,{pickup:t,destination:n,fare:L,vehicleType:U,createRide:ee,setConfirmRidePanel:T,setVehicleFound:A})}),(0,r.jsx)("div",{ref:M,className:"fixed w-full z-10 bottom-0 translate-y-full bg-white px-3 py-6 pt-12",children:(0,r.jsx)(x,{pickup:t,destination:n,fare:L,vehicleType:U,createRide:ee,setVehicleFound:A})}),(0,r.jsx)("div",{ref:W,className:"fixed w-full z-10 bottom-0 translate-y-full bg-white px-3 py-6 pt-12",children:(0,r.jsx)(h,{ride:F,setVehicleFound:A,waitingForDriver:_,setWaitingForDriver:O})})]})})}},6339:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(6760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\UBER-CLONE-PROJECT\\\\frontend\\\\src\\\\app\\\\home\\\\page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\UBER-CLONE-PROJECT\\frontend\\src\\app\\home\\page.js","default")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,707,77,531,713,138,58],()=>s(2655));module.exports=r})();